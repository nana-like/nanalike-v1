<!DOCTYPE html>
<html lang="ko">
@@include("html/common/document-head.html")

<body>

  <script>
    var loadingEvt = function () {
      document.body.classList.add("loading--ongoing");

      function canUseWebP() {
        var elem = document.createElement('canvas');

        if (!!(elem.getContext && elem.getContext('2d'))) {
          // was able or not to get WebP representation
          return elem.toDataURL('image/webp').indexOf('data:image/webp') == 0;
        }

        // very old browser like IE 8, canvas not supported
        return false;
      }

      if (!canUseWebP()) {
        var bgelements = document.querySelectorAll(".profile__photo, .visual__inner, .screen, .icon");
        bgelements.forEach(function (element) {
          element.classList.add('no-webp');
        })
      }

      var lazyVideos = [].slice.call(document.querySelectorAll("video.lazy"));

      if ("IntersectionObserver" in window) {
        var lazyVideoObserver = new IntersectionObserver(function (entries, observer) {
          entries.forEach(function (video) {
            if (video.isIntersecting) {
              for (var source in video.target.children) {
                var videoSource = video.target.children[source];
                if (typeof videoSource.tagName === "string" && videoSource.tagName === "SOURCE") {
                  videoSource.src = videoSource.dataset.src;
                }
              }

              video.target.load();
              video.target.classList.remove("lazy");
              lazyVideoObserver.unobserve(video.target);
            }
          });
        });

        lazyVideos.forEach(function (lazyVideo) {
          lazyVideoObserver.observe(lazyVideo);
        });
      }
    }
    window.addEventListener("DOMContentLoaded", loadingEvt);
  </script>

  <div class="wrap">
    @@include("html/common/loading.html")
    @@include("html/common/header.html")
    @@include("html/layout/visual.html")
    @@include("html/layout/about.html")
    @@include("html/layout/work.html")
    @@include("html/layout/blog.html")
    @@include("html/layout/pr.html")
    @@include("html/layout/contact.html")
    @@include("html/common/footer.html")
    @@include("html/common/modal.html")
    @@include("html/common/script.html")
  </div>

</body>

</html>