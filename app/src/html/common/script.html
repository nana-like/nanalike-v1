<script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/plugins/animation.gsap.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/plugins/ScrollToPlugin.min.js"></script>
<script src="//code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="js/ui.min.js"></script>
<script>
  $(document).ready(function () {

    var url = "https://nykim.net/tapi/rss";

    $.ajax({
      url: url,
      type: 'GET',
      dataType: 'xml',
    })
      .done(function (data) {


        // * 리팩토링 필요


        $(data).find('channel item').each(function () {
          var itemTitle = $(this).find('title').text();
          var permaLink = $(this).find('link').text();
          var desc = $(this).find('description');

          var pubText = $(this).find('pubDate').text();
          var pubDate = new Date(pubText);
          var dateString = pubDate.getFullYear() + '.' + (pubDate.getMonth() + 1) + '.' + pubDate.getDate();

          var doc = new DOMParser().parseFromString($(this).find('description').text(), "text/html");
          var imgs = doc.getElementsByTagName('img');

          var listItem = document.createElement("li");
          listItem.classList.add("blog-list__item");

          var link = document.createElement("a");
          link.classList.add("blog-list__link");
          link.href = permaLink;
          link.setAttribute("target", "_blank");

          var img = document.createElement("div");
          // img.src = doc.getElementsByTagName('img')[0].src;
          img.style.backgroundImage = `url('${doc.getElementsByTagName('img')[0].src}')`;
          img.classList.add("blog-list__img");
          link.appendChild(img);

          var info = document.createElement("div");
          info.classList.add("blog-list__info");

          var title = document.createElement("strong");
          title.innerHTML = itemTitle;
          title.classList.add("blog-list__title");
          info.appendChild(title);

          var date = document.createElement("p");
          date.innerHTML = dateString;
          date.classList.add("blog-list__date");
          info.appendChild(date);

          link.appendChild(info);
          listItem.appendChild(link);

          var blogList = document.querySelector(".blog-list");
          blogList.appendChild(listItem);
        });
      })
      .fail(function () {
        console.error('데이터 불러오기에 실패했습니다.');
      });
  });


  console.log(
    "%c 안녕하세요, 나나입니다 :-)", "background-color:#3e87f8; color: #fff; font-weight:bold; font-size:120%; padding: 4px;");
</script>